
# 1 Introduction

光輸送をシミュレーションすることは科学の様々な分野からCG産業に至るまで多くの応用があります。近年では、映像産業はモンテカルロパストレーシングに大きな注目を示しています。パストレーシングは商業的なレンダラー（ソリッドアングル社のArnoldやピクサーのRenderMan）や社内開発のレンダラー（ディズニーのHyperionやワタデジタルのManuka)の両方で数多くの発展を及ぼしています。

静止画を使用することが多い建築や製造産業とは対照的に、映像業界での産業レンダラーは主にアニメーションの制作に使用されます。これは各フレームのレンダリングに費やされる時間の量に厳しい制約が課せられます。多くのプロダクションでは、これはレンダラーが一般的に一夜でレンダリングし、シャープかつ低ノイズな画像を時間的な安定性を持ったうえで出さなくてはなりません。映画（特にVFX)で使用されている一般的なビジュアル言語はレイトレーシングする際に非常に高価になる複雑で膨大なアセットに変換されます。この理由から、サンプルの配置（レイトレのサンプルのこと？）を工夫することは大きな利点を生みます。

アンバイアスなパストレーシングをサンプルするのに特に困難な１つのパスの制約はspecular-diffuse-specula(SDS)と呼ばれる（特にちゃんとサンプルするのが難しいもの）。２つのスペキュラ点の間にDiffuseまたは粗いグロッシーな点を含む光輸送パスが存在しているとする。
この制約はスペキュラーイベントが満たすのが難しいハーフベクターの制約を課すため問題となります。
サンプリングする際、これは中間点($x_b$)でのディフューズ散乱のシミュレーションが光源へ$x_b$からパスを直接つなぐことができないことを意味します。
確かに、この場合、一般的なアプローチとして光源点決定的につなぐ違うサンプリング手法（NEE）が使われます。$x_b$から光源に行く全てのパスは屈折面を通らないといけないため、この手法は使うことができないことが分かります。

Metropolis light transport(MLT)やフォトンマッピングといったSDSパスをうまく扱おうとする手法はありましたが、これらは時間的な安定性やメモリフットプリントが大きいという欠点があり、実用的な手法ではありませんでした。これは肌についた水滴や水、またはガラス、水に埋め込まれたオブジェクトといった一見簡単に見えるケースでも不十分でした。
許容ライトパス（admissible light path)は通常、界面を無視した非屈折接続からそこまで大きくは逸脱しません。
NEEが提案するパスでありますが、これはフェルマーの法則（最短距離を通る）に違反するため失敗します。
(フェルマーの法則)[https://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A7%E3%83%AB%E3%83%9E%E3%83%BC%E3%81%AE%E5%8E%9F%E7%90%86]

我々の発想はNEEをより"堅牢"にする、つまり接続をあきらめることなく寄与を取れるように種パスをハーフベクトル制約を満たす許容パスに変更することを目的にしている。
我々はこれを相関サンプリング、すなわち、ランダムに種パスをマルコフ連鎖モンテカルロ法から外れることなく摂動させることで実現しました。
これにより、実装や既存システムの組み込みが用意になることが考えられ、フレーム感のノイズも改善する。
この手法は粗い散乱や多層透明面への理想スペキュラにのみ対応しています。
これをバイアスを入れずにNEEに拡張し、モンテカルロパストレイサーに統合します。
この手法は実用的には非常によくある、関係しているシンプルなシーンの範囲で効果的であり、スレッド同期が必要ないため、うまく少ないメモリ要求と拡張性をつなげている。

# 2 Background and previous work

